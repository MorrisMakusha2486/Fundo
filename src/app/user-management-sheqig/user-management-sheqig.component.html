<div class="min-h-screen bg-gray-50 p-4 md:p-8">
  <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8">

    <!-- Main Form Area -->
    <div class="lg:col-span-2 bg-white p-6 md:p-8 rounded-xl shadow-lg">
      <h1 class="text-3xl font-bold text-gray-800 mb-6 border-b border-gray-200 pb-4">Client Service Request</h1>

      <!-- Stepper Navigation -->
      <div class="mb-8">
        <ol class="flex items-center w-full text-sm font-medium text-center text-gray-500 dark:text-gray-400">
          <!-- Step 1 -->
          <li [ngClass]="{'text-green-600 dark:text-green-500': currentStep >= 1}" class="flex md:w-full items-center sm:after:content-[''] after:w-full after:h-1 after:border-b after:border-gray-200 after:border-1 after:hidden sm:after:inline-block after:mx-6 xl:after:mx-10 dark:after:border-gray-700">
            <span [ngClass]="{'border-green-600 dark:border-green-500': currentStep >= 1}" class="flex items-center after:content-['/'] sm:after:hidden after:mx-2 after:text-gray-200 dark:after:text-gray-500">
              <svg *ngIf="currentStep > 1" class="w-4 h-4 mr-2 sm:w-5 sm:h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z" />
              </svg>
              <span *ngIf="currentStep === 1" [ngClass]="{'border-green-600 dark:border-green-500': currentStep === 1}" class="mr-2 border-2 rounded-full w-6 h-6 flex items-center justify-center text-xs">1</span>
              <span *ngIf="currentStep !== 1" class="mr-2">1</span>
              Client <span class="hidden sm:inline-flex sm:ml-2">Details</span>
            </span>
          </li>
          <!-- Step 2 -->
          <li [ngClass]="{'text-green-600 dark:text-green-500': currentStep >= 2}" class="flex md:w-full items-center sm:after:content-[''] after:w-full after:h-1 after:border-b after:border-gray-200 after:border-1 after:hidden sm:after:inline-block after:mx-6 xl:after:mx-10 dark:after:border-gray-700">
            <span [ngClass]="{'border-green-600 dark:border-green-500': currentStep >= 2}" class="flex items-center after:content-['/'] sm:after:hidden after:mx-2 after:text-gray-200 dark:after:text-gray-500">
              <svg *ngIf="currentStep > 2" class="w-4 h-4 mr-2 sm:w-5 sm:h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z" />
              </svg>
              <span *ngIf="currentStep === 2" [ngClass]="{'border-green-600 dark:border-green-500': currentStep === 2}" class="mr-2 border-2 rounded-full w-6 h-6 flex items-center justify-center text-xs">2</span>
              <span *ngIf="currentStep !== 2" class="mr-2">2</span>
              Location <span class="hidden sm:inline-flex sm:ml-2">& Worksite</span>
            </span>
          </li>
          <!-- Step 3 -->
          <li [ngClass]="{'text-green-600 dark:text-green-500': currentStep >= 3}" class="flex items-center">
            <span [ngClass]="{'border-green-600 dark:border-green-500': currentStep >= 3}" class="flex items-center">
              <svg *ngIf="currentStep === 3" class="w-4 h-4 mr-2 sm:w-5 sm:h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z" />
              </svg>
              <span *ngIf="currentStep === 3" [ngClass]="{'border-green-600 dark:border-green-500': currentStep === 3}" class="mr-2 border-2 rounded-full w-6 h-6 flex items-center justify-center text-xs">3</span>
              <span *ngIf="currentStep !== 3" class="mr-2">3</span>
              Services & Preferences
            </span>
          </li>
        </ol>
      </div>

      <!-- Form Content -->
      <form [formGroup]="clientForm" (ngSubmit)="onSubmit()" class="space-y-6">

        <!-- Step 1: Client Details -->
        <div *ngIf="currentStep === 1" class="space-y-6 animate-fade-in">
          <h2 class="text-xl font-semibold text-gray-700 mb-5">Step 1: Client Information</h2>

          <!-- Full Name -->
          <div>
            <label for="fullName" class="block text-sm font-medium text-gray-700 mb-1">Full Name <span class="text-red-500">*</span></label>
            <input type="text" id="fullName" formControlName="fullName" required class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
            <div *ngIf="clientForm.controls['fullName'].invalid && (clientForm.controls['fullName'].dirty || clientForm.controls['fullName'].touched)" class="text-red-600 text-xs mt-1">
              Full Name is required.
            </div>
          </div>

          <!-- Contact Info -->
          <div>
            <label for="contactInfo" class="block text-sm font-medium text-gray-700 mb-1">Contact Info <span class="text-red-500">*</span></label>
            <input type="text" id="contactInfo" formControlName="contactInfo" required class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
            <div *ngIf="clientForm.controls['contactInfo'].invalid && (clientForm.controls['contactInfo'].dirty || clientForm.controls['contactInfo'].touched)" class="text-red-600 text-xs mt-1">
              Contact Info is required.
            </div>
          </div>

          <!-- Email -->
          <div>
            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email (Optional)</label>
            <input type="email" id="email" formControlName="email" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
            <div *ngIf="clientForm.controls['email'].invalid && (clientForm.controls['email'].dirty || clientForm.controls['email'].touched)" class="text-red-600 text-xs mt-1">
              Invalid email format.
            </div>
          </div>

          <!-- Phone Number -->
          <div>
            <label for="phoneNumber" class="block text-sm font-medium text-gray-700 mb-1">Phone Number <span class="text-red-500">*</span></label>
            <input type="tel" id="phoneNumber" formControlName="phoneNumber" required class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
            <div *ngIf="clientForm.controls['phoneNumber'].invalid && (clientForm.controls['phoneNumber'].dirty || clientForm.controls['phoneNumber'].touched)" class="text-red-600 text-xs mt-1">
              Phone Number is required.
            </div>
          </div>
        </div>

        <!-- Step 2: Location & Worksite Details -->
        <div *ngIf="currentStep === 2" class="space-y-6 animate-fade-in">
          <h2 class="text-xl font-semibold text-gray-700 mb-5">Step 2: Location & Worksite Details</h2>

          <!-- Address -->
          <div>
            <label for="address" class="block text-sm font-medium text-gray-700 mb-1">Address <span class="text-red-500">*</span></label>
            <input type="text" id="address" formControlName="address" required class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
            <div *ngIf="clientForm.controls['address'].invalid && (clientForm.controls['address'].dirty || clientForm.controls['address'].touched)" class="text-red-600 text-xs mt-1">
              Address is required.
            </div>
          </div>

          <!-- Area Size -->
          <div>
            <label for="areaSize" class="block text-sm font-medium text-gray-700 mb-1">Area Size <span class="text-red-500">*</span></label>
            <input type="text" id="areaSize" formControlName="areaSize" required class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
            <div *ngIf="clientForm.controls['areaSize'].invalid && (clientForm.controls['areaSize'].dirty || clientForm.controls['areaSize'].touched)" class="text-red-600 text-xs mt-1">
              Area Size is required.
            </div>
          </div>

          <!-- Google Maps -->
          <div class="map-container">
            
          </div>

          <!-- GPS Location -->
          <div>
            <label for="gpsLocation" class="block text-sm font-medium text-gray-700 mb-1">GPS Location</label>
            <input type="text" id="gpsLocation" formControlName="gpsLocation" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-100 cursor-not-allowed sm:text-sm" placeholder="Fetching location..." readonly>
          </div>
        </div>

        <!-- Step 3: Services & Preferences -->
        <div *ngIf="currentStep === 3" class="space-y-6 animate-fade-in">
          <h2 class="text-xl font-semibold text-gray-700 mb-5">Step 3: Services & Preferences</h2>

          <!-- Cleaning Type -->
          <div>
            <label for="cleaningType" class="block text-sm font-medium text-gray-700 mb-1">Cleaning Type <span class="text-red-500">*</span></label>
            <select id="cleaningType" formControlName="cleaningType" required class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
              <option value="">Select Cleaning Type</option>
              <option value="residential">Residential</option>
              <option value="commercial">Commercial</option>
            </select>
            <div *ngIf="clientForm.controls['cleaningType'].invalid && (clientForm.controls['cleaningType'].dirty || clientForm.controls['cleaningType'].touched)" class="text-red-600 text-xs mt-1">
              Cleaning Type is required.
            </div>
          </div>

          <!-- Frequency -->
          <div>
            <label for="frequency" class="block text-sm font-medium text-gray-700 mb-1">Frequency <span class="text-red-500">*</span></label>
            <select id="frequency" formControlName="frequency" required class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
              <option value="">Select Frequency</option>
              <option value="weekly">Weekly</option>
              <option value="bi-weekly">Bi-Weekly</option>
              <option value="monthly">Monthly</option>
            </select>
            <div *ngIf="clientForm.controls['frequency'].invalid && (clientForm.controls['frequency'].dirty || clientForm.controls['frequency'].touched)" class="text-red-600 text-xs mt-1">
              Frequency is required.
            </div>
          </div>

          <!-- Notes -->
          <div>
            <label for="notes" class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
            <textarea id="notes" formControlName="notes" rows="3" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"></textarea>
          </div>

          <!-- Attachments -->
          <div>
            <label for="attachments" class="block text-sm font-medium text-gray-700 mb-1">Attachments</label>
            <input type="file" id="attachments" formControlName="attachments" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
          </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="flex justify-between pt-4">
          <button type="button"  *ngIf="currentStep > 1" class="py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
            Previous
          </button>
          <button type="button" *ngIf="currentStep < 3" class="py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
            Next
          </button>
          <button type="submit" *ngIf="currentStep === 3" [disabled]="clientForm.invalid" class="py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed">
            Submit
          </button>
        </div>
      </form>
    </div>

    <!-- Side Panel Summary -->
    <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
      <h2 class="text-xl font-semibold text-gray-700 mb-5">Summary</h2>
      <div class="space-y-4">
        <div>
          <h3 class="text-lg font-medium text-gray-800">Client Details</h3>
          <p class="text-gray-600">Name: {{ summary.fullName }}</p>
          <p class="text-gray-600">Contact: {{ summary.contactInfo }}</p>
        </div>

        <div>
          <h3 class="text-lg font-medium text-gray-800">Worksite Location</h3>
          <p class="text-gray-600">Address: {{ summary.address }}</p>
          <div >
            <iframe  width="100%" height="200" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
          </div>
        </div>

        <div>
          <h3 class="text-lg font-medium text-gray-800">Services</h3>
          <p class="text-gray-600">Cleaning Type: {{ summary.cleaningType }}</p>
          <p class="text-gray-600">Frequency: {{ summary.frequency }}</p>
        </div>
      </div>
    </div>
  </div>
</div>